{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/shen/JOLI/containers/cardList/index.js\";\nimport React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useRouter } from 'next/router';\nimport { deleteForm } from '../../apis/forms';\nimport { fetchFormList } from '../../redux/slices/formsSlice';\nimport { fetchResponseList } from '../../redux/slices/responseSlice';\nimport CreateCard from '../../components/formCard/create';\nimport Card from '../../components/formCard/normal';\nimport Popup from '../popup';\nimport Delete from '../popup/delete';\nimport ShareLink from '../popup/shareLink';\nimport { Wrapper } from './styled';\n\nconst cardList = ({\n  tabName\n}) => {\n  const router = useRouter();\n  const dispatch = useDispatch();\n  const formList = useSelector(state => state.form.list);\n  const respList = useSelector(state => state.response.list);\n  useEffect(() => {\n    if (tabName === 'my-form') {\n      dispatch(fetchFormList());\n    }\n\n    if (tabName === 'filled-form') {\n      dispatch(fetchResponseList());\n    }\n  }, [tabName]);\n  const {\n    0: isOpen,\n    1: setIsOpen\n  } = useState(false);\n  const {\n    0: type,\n    1: setType\n  } = useState(null);\n  const {\n    0: activeId,\n    1: setId\n  } = useState(null);\n  const {\n    0: link,\n    1: setLink\n  } = useState('');\n\n  const handleClose = () => setIsOpen(false);\n\n  const handleAdd = () => {\n    router.push('/create-setting');\n  };\n\n  const handleClick = id => {\n    if (id === activeId) {\n      setId(null);\n    } else {\n      setId(id);\n    }\n  };\n\n  const handleEdit = () => {\n    console.log('edit');\n  };\n\n  const handlePreview = () => {\n    console.log('preview');\n  };\n\n  const handleShare = () => {\n    if (tabName === 'my-form') {\n      const {\n        uuid\n      } = formList[activeId];\n      setLink(`https://cryptic-crag-39318.herokuapp.com/jolly/forms/${uuid}`);\n    }\n\n    if (tabName === 'filled-form') {\n      const {\n        formUuid\n      } = respList[activeId];\n      setLink(`/jolly/forms/${formUuid}`);\n    }\n\n    setType('share');\n    setIsOpen(true);\n  };\n\n  const handleReview = () => {\n    const {\n      uuid\n    } = formList[activeId];\n    router.push(`/jolly/response/${uuid}`);\n  };\n\n  const handleDelete = () => {\n    setType('delete');\n    setIsOpen(true);\n  };\n\n  const onDelete = () => {\n    const {\n      uuid\n    } = list[activeId];\n    deleteForm({\n      uuid\n    });\n    setIsOpen(false);\n  };\n\n  const handleCopy = () => {\n    const ele = document.getElementById('copy_link');\n    ele.select();\n    ele.setSelectionRange(0, 99999);\n    document.execCommand('copy');\n  };\n\n  const options = [{\n    text: 'Edit',\n    onClickEvent: () => handleEdit()\n  }, {\n    text: 'Preview',\n    onClickEvent: () => handlePreview()\n  }, {\n    text: 'Share',\n    onClickEvent: () => handleShare()\n  }, {\n    text: 'Responses',\n    onClickEvent: () => handleReview()\n  }, {\n    text: 'Delete',\n    onClickEvent: () => handleDelete()\n  }];\n  const list = tabName === 'my-form' ? formList : respList;\n  return /*#__PURE__*/_jsxDEV(Wrapper, {\n    children: [/*#__PURE__*/_jsxDEV(CreateCard, {\n      handleAdd: handleAdd\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this), tabName === 'my-form' && list && list.length > 0 && list.map((card, idx) => /*#__PURE__*/_jsxDEV(Card, {\n      id: idx,\n      activeId: activeId,\n      title: card.name,\n      times: card.updatedAt,\n      response: card.Responses.length,\n      options: options,\n      handleClick: () => handleClick(idx)\n    }, idx, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }, this)), tabName === 'filled-form' && list && list.length > 0 && list.map((card, idx) => /*#__PURE__*/_jsxDEV(Card, {\n      id: idx,\n      activeId: activeId,\n      title: card.formName,\n      times: card.formExpiresAt,\n      sponser: card.sponsorName,\n      options: options,\n      handleClick: () => handleClick(idx)\n    }, idx, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 11\n    }, this)), /*#__PURE__*/_jsxDEV(Popup, {\n      isOpen: isOpen,\n      onClose: () => handleClose(),\n      children: [type === 'delete' && /*#__PURE__*/_jsxDEV(Delete, {\n        formName: list[activeId].name,\n        onDelete: onDelete,\n        handleClose: handleClose\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 31\n      }, this), type === 'share' && /*#__PURE__*/_jsxDEV(ShareLink, {\n        value: link,\n        handleCopy: handleCopy\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 30\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 5\n  }, this);\n};\n\nexport default cardList;","map":{"version":3,"sources":["/Users/shen/JOLI/containers/cardList/index.js"],"names":["React","useEffect","useState","useSelector","useDispatch","useRouter","deleteForm","fetchFormList","fetchResponseList","CreateCard","Card","Popup","Delete","ShareLink","Wrapper","cardList","tabName","router","dispatch","formList","state","form","list","respList","response","isOpen","setIsOpen","type","setType","activeId","setId","link","setLink","handleClose","handleAdd","push","handleClick","id","handleEdit","console","log","handlePreview","handleShare","uuid","formUuid","handleReview","handleDelete","onDelete","handleCopy","ele","document","getElementById","select","setSelectionRange","execCommand","options","text","onClickEvent","length","map","card","idx","name","updatedAt","Responses","formName","formExpiresAt","sponsorName"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useRouter } from 'next/router';\n\nimport { deleteForm } from '../../apis/forms';\nimport { fetchFormList } from '../../redux/slices/formsSlice';\nimport { fetchResponseList } from '../../redux/slices/responseSlice';\nimport CreateCard from '../../components/formCard/create';\nimport Card from '../../components/formCard/normal';\nimport Popup from '../popup';\nimport Delete from '../popup/delete';\nimport ShareLink from '../popup/shareLink';\n\nimport { Wrapper } from './styled';\n\nconst cardList = ({ tabName }) => {\n  const router = useRouter();\n  const dispatch = useDispatch();\n  const formList = useSelector((state) => state.form.list);\n  const respList = useSelector((state) => state.response.list);\n\n  useEffect(() => {\n    if (tabName === 'my-form') {\n      dispatch(fetchFormList());\n    }\n    if (tabName === 'filled-form') {\n      dispatch(fetchResponseList());\n    }\n  }, [tabName]);\n\n  const [isOpen, setIsOpen] = useState(false);\n  const [type, setType] = useState(null);\n  const [activeId, setId] = useState(null);\n  const [link, setLink] = useState('');\n\n  const handleClose = () => setIsOpen(false);\n\n  const handleAdd = () => {\n    router.push('/create-setting');\n  };\n\n  const handleClick = (id) => {\n    if (id === activeId) {\n      setId(null);\n    } else {\n      setId(id);\n    }\n  };\n\n  const handleEdit = () => {\n    console.log('edit');\n  };\n  const handlePreview = () => {\n    console.log('preview');\n  };\n  const handleShare = () => {\n    if (tabName === 'my-form') {\n      const { uuid } = formList[activeId];\n      setLink(`https://cryptic-crag-39318.herokuapp.com/jolly/forms/${uuid}`)\n    }\n    if (tabName === 'filled-form') {\n      const { formUuid } = respList[activeId];\n      setLink(`/jolly/forms/${formUuid}`)\n    }\n\n    setType('share');\n    setIsOpen(true);\n  };\n  const handleReview = () => {\n    const { uuid } = formList[activeId];\n    router.push(`/jolly/response/${uuid}`);\n  };\n  const handleDelete = () => {\n    setType('delete');\n    setIsOpen(true);\n  };\n\n  const onDelete = () => {\n    const { uuid } = list[activeId];\n    deleteForm({ uuid });\n    setIsOpen(false);\n  };\n\n  const handleCopy = () => {\n    const ele = document.getElementById('copy_link');\n    ele.select();\n    ele.setSelectionRange(0, 99999);\n\n    document.execCommand('copy');\n  };\n\n  const options = [\n    {\n      text: 'Edit',\n      onClickEvent: () => handleEdit(),\n    },\n    {\n      text: 'Preview',\n      onClickEvent: () => handlePreview(),\n    },\n    {\n      text: 'Share',\n      onClickEvent: () => handleShare(),\n    },\n    {\n      text: 'Responses',\n      onClickEvent: () => handleReview(),\n    },\n    {\n      text: 'Delete',\n      onClickEvent: () => handleDelete(),\n    },\n  ];\n\n  const list = tabName === 'my-form' ? formList : respList;\n\n  return (\n    <Wrapper>\n      <CreateCard handleAdd={handleAdd} />\n      { tabName === 'my-form' && list && list.length > 0 && list.map((card, idx) => (\n        <Card\n          key={idx}\n          id={idx}\n          activeId={activeId}\n          title={card.name}\n          times={card.updatedAt}\n          response={card.Responses.length}\n          options={options}\n          handleClick={() => handleClick(idx)}\n        />\n      ))}\n      { tabName === 'filled-form'\n        && list\n        && list.length > 0\n        && list.map((card, idx) => (\n          <Card\n            key={idx}\n            id={idx}\n            activeId={activeId}\n            title={card.formName}\n            times={card.formExpiresAt}\n            sponser={card.sponsorName}\n            options={options}\n            handleClick={() => handleClick(idx)}\n          />\n        ))}\n      <Popup\n        isOpen={isOpen}\n        onClose={() => handleClose()}\n      >\n        {type === 'delete' && <Delete formName={list[activeId].name} onDelete={onDelete} handleClose={handleClose} />}\n        {type === 'share' && <ShareLink value={link} handleCopy={handleCopy} />}\n      </Popup>\n    </Wrapper>\n  );\n};\n\nexport default cardList;\n"]},"metadata":{},"sourceType":"module"}